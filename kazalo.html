<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
</head>

<body>
  <script src="seznamPesmi.js"></script>

  <script>
      var urlString = window.location.href;

    // https://www.geeksforgeeks.org/how-to-get-url-parameters-using-javascript/
    let paramString = urlString.split('?')[1];
    let queryString = new URLSearchParams(paramString);

    var stevec = 0;
    for (var par of queryString.entries()) {
        if (stevec == 1) {
            throw "Preve훾 argumentov! To se ne bi smelo zgoditi.";
        }
        if (par[0] != "pot") {
            throw "Napa훾en argument!";
        }
        stevec++;
    }

    seznam = par[1].split("~")
    // seznam vseh imen folderjev v urlju. npr. : "?pot=prvi_folder~drugi_folder~tretji_folder", potem ima seznam pa훾 te tri elemente
    // ~ je lo훾ilo

    var podSlovar = seznamPesmi;
    for (var i = 0; i < seznam.length; i++) {
        podSlovar = podSlovar[seznam[i]]
    }


    for (var i in podSlovar) {
      var lineBreak = document.createElement("br");
      document.body.append(lineBreak);
      
      var novLink = document.createElement("a");
      
      if (podSlovar[i] != null) {
        novLink.href = "https://TGlinsek.github.io/pesmarica/kazalo.html?pot=" + seznam.join("~") + "~" + i;
      } else {
        novLink.href = "https://TGlinsek.github.io/pesmarica/pesem.html?ime=" + seznam.join("~") + "~" + i;
      }
      
      novLink.innerHTML = i;
      document.body.append(novLink);
    }
  </script>
  
</body>

</html>
